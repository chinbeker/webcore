!function(){"use strict";class ServiceManager{static#e=null;#t=new Map;#n=new Map;constructor(){if(ServiceManager.#e)return ServiceManager.#e;Object.freeze(this),ServiceManager.#e=this}#r(e){const t=e.depends.map(e=>this.get(e));return new e.service(...t)}get(e){if(!this.has(e))throw new Error(`Service '${e}' not registered`);const t=this.#t.get(e);return t.singleton?(this.#n.has(e)||this.#n.set(e,this.#r(t)),this.#n.get(e)):this.#r(t)}has(e){return this.#t.has(e)}serviceNames(){return Array.from(this.#t.keys())}register(e,t,n={}){if("string"==typeof e&&"object"==typeof n){const r={singleton:!1,depends:[],...n};this.#t.set(e,{service:t,...r})}return this}addSingleton(e,t,n=[]){return this.register(e,t,{singleton:!0,depends:n})}addTransient(e,t,n=[]){return this.register(e,t,{singleton:!1,depends:n})}destroy(){this.#n.forEach(e=>{"function"==typeof e.destroy&&e.destroy()}),this.#t.clear(),this.#n.clear()}}class DataBase{#s=null;constructor(e=null){Object.isObject(e)&&Object.hasPrototype(e)?(Object.setPrototypeOf(e,null),this.#s=e):this.#s=Object.create(null),Object.freeze(this)}get count(){return Object.keys(this.#s).length}add(e,t){return this.set(e,t),this}has(e){return Object.hasOwn(this.#s,e)}set(e,t){return this.#s[e]=t,this}get(e){return this.has(e)?this.#s[e]:null}keys(){return Object.keys(this.#s)}delete(e){return this.has(e)&&delete this.#s[e],this}remove(e){return this.delete(e)}clear(){for(const e of Object.keys(this.#s))delete this.#s[e];return!0}}class Configuration extends DataBase{constructor(e=null){if(Object.isObject(e))for(const t of Object.keys(e))Object.hasPrototype(e[t])&&Object.setPrototypeOf(e[t],null);super(e)}create(e=null){return new Configuration(e)}}class ApplicationBuilder{static#e=null;#i=null;#o;#a;#c;#t=[];constructor(){if(ApplicationBuilder.#e)return ApplicationBuilder.#e;this.#l(),ApplicationBuilder.#e=this}#l(){this.#h(),this.#o=new Configuration,this.#o.set("base",location.origin),this.#o.set("environment",window.isSecureContext&&"http:"===location.protocol?"development":"production"),this.#a=new ServiceManager}#h(){Object.defineProperty(Object,"defineReadOnlyProperty",{value:function(e,t,n){if(null==e)throw new TypeError("Target cannot be null or undefined.");if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Target must be an object or function.");if("string"!=typeof t&&"symbol"!=typeof t)throw new TypeError("Property key must be a string or symbol.");const r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable)throw new TypeError(`Cannot redefine non-configurable property: ${t}`);return Object.defineProperty(e,t,{value:n,writable:!1,enumerable:!1,configurable:!1}),!0},writable:!1,enumerable:!1,configurable:!1}),Object.defineReadOnlyProperty(Object,"isObject",function(e){return"[object Object]"===Object.prototype.toString.call(e)}),Object.defineReadOnlyProperty(Object,"hasPrototype",function(e){return null!=e&&"object"==typeof e&&null!=Object.getPrototypeOf(e)}),Object.defineReadOnlyProperty(Object,"cob",function(e=null){const t=Object.create(null);return Object.isObject(e)&&Object.hasPrototype(e)&&Object.assign(t,e),t}),Object.defineReadOnlyProperty(String,"isNullOrEmpty",function(e){return null==e||"string"==typeof e&&0===e.length}),Object.defineReadOnlyProperty(ApplicationBuilder,"NON_WHITESPACE_REGEX",/\S/),Object.defineReadOnlyProperty(String,"isNullOrWhiteSpace",function(e){return null==e||"string"==typeof e&&!ApplicationBuilder.NON_WHITESPACE_REGEX.test(e)})}setConfig(e,t){return this.#o.set(e,t),this}addService(e,t,n={}){return this.#a.register(e,t,n),this.#t.push(e),this}addSingleton(e,t,n=[]){return this.#a.addSingleton(e,t,n),this.#t.push(e),this}addTransient(e,t,n=[]){return this.#a.addTransient(e,t,n),this.#t.push(e),this}build(){const e=new Application(this.#o,this.#a,this.#c);for(const t of this.#t)e[t]=this.#a.get(t);return Object.freeze(e),e}}class Application{static#e=null;configuration=null;services=null;constructor(e,t){if(Application.#e)return Application.#e;this.configuration=e,this.services=t,Application.#e=this}static createBuilder(){return new ApplicationBuilder}getConfig(e){return this.configuration.get(e)}getService(e){return this.services.get(e)}hasService(e){return this.services.has(e)}cob(e=null){return Object.cob(e)}cfn(e,t){return"function"!=typeof t?null:1==t.length?()=>{t(e)}:t.length>1?(...n)=>{t(e,...n)}:null}typeOf(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).replace(/^\[object (\S+)\]$/,"$1").toLowerCase()}async loader(e=""){if("string"!=typeof e)throw new TypeError("URL parameters must be of string type.");if(!e)throw new TypeError("URL parameter cannot be empty.");try{const t=await fetch(e);return await t.text()}catch(t){throw t}}createElement(e="div",t="",n=null){e="string"==typeof e&&e?e:"div";const r=document.createElement(e);if("object"===this.typeOf(n)){for(const[e,t]of Object.entries(n))r.setAttribute(e,t||"");n=null}return t&&(r.textContent=t),r}serviceNames(){return this.services.serviceNames()}run(){Object.hasOwn(this,"initial")&&this.initial.execute()}}class InitialService{static instance=null;default=null;open=null;loaded=null;executed=!1;constructor(){if(InitialService.instance)return InitialService.instance;self.addEventListener("DOMContentLoaded",()=>{try{"function"==typeof this.loaded&&(this.loaded(),this.loaded=null),this.executed=!0}catch(e){return!1}},{once:!0}),Object.seal(this),InitialService.instance=this}execute(){if(!this.executed&&"function"==typeof this.default)try{"function"==typeof this.default&&(this.default(),this.default=null),"function"==typeof this.open&&(this.open(),this.open=null),this.executed=!0}catch(e){return!1}return!0}}class LayoutService{static#e=null;executed=!1;root=null;font=Object.create(null);constructor(){if(LayoutService.#e)return LayoutService.#e;this.executed=!1,this.root=document.documentElement,this.setupFontScaling(),this.setupUserExperience(),this.executed=!0,Object.freeze(this),LayoutService.#e=this}get fontSize(){return parseFloat(getComputedStyle(this.root).getPropertyValue("font-size"))}setupFontScaling(){if(this.executed)return!1;const e=this.root;if(e.classList.contains("dync"))return!1;const t=screen.orientation;this.font.base=28.57,this.font.initial=parseFloat(getComputedStyle(e).getPropertyValue("font-size"))||15.4;const n=()=>{0==screen.orientation.angle||180==screen.orientation.angle?this.root.classList.add("portrait"):this.root.classList.remove("portrait")},r=()=>{0==screen.orientation.angle||180==screen.orientation.angle?(this.root.style.fontSize=this.font.portrait,this.root.classList.add("portrait")):(this.root.style.fontSize=this.font.landscape,this.root.classList.remove("portrait"))},s=screen.width/this.font.initial<this.font.base||screen.height/this.font.initial<this.font.base;return!t.type.startsWith("p")||0!=t.angle&&180!=t.angle?!t.type.startsWith("l")||90!=t.angle&&270!=t.angle||(s?top.innerWidth>screen.width?(this.font.portrait=top.innerWidth/this.font.base+"px",this.font.landscape=top.innerWidth/screen.width*(screen.height/this.font.base)+"px",e.style.fontSize=this.font.landscape,t.onchange=r):(this.font.portrait=screen.height/this.font.base+"px",e.style.fontSize=this.font.portrait,t.onchange=n):t.onchange=n):(e.classList.add("portrait"),s?(this.font.portrait=top.innerWidth/this.font.base+"px",e.style.fontSize=this.font.portrait,top.innerWidth>screen.width?(this.font.landscape=top.innerWidth/screen.height*(screen.width/this.font.base)+"px",t.onchange=r):t.onchange=n):t.onchange=n),!0}setupUserExperience(){if(this.executed)return!1;this.root.classList.contains("ban")&&(this.root.oncontextmenu=e=>(e.preventDefault(),e.stopPropagation(),!1));const e=function(){};return document.addEventListener("touchstart",e,{passive:!0}),window.onbeforeunload=()=>{document.removeEventListener("touchstart",e)},!0}}class OrientationChange{static#e=null;#u=[];#p=!1;constructor(){if(OrientationChange.#e)return OrientationChange.#e;Object.freeze(this),OrientationChange.#e=this}get length(){return this.#u.length}get count(){return this.#u.length}add(e){return this.#p||"function"!=typeof e||(this.remove(e),this.#u.push(e)),this}addBatch(e){if(!this.#p&&Array.isArray(e))for(const t of e)this.add(t);return this}has(e){return"function"==typeof e&&-1!==this.#u.indexOf(e)}async execute(){if(this.#p)return!1;this.#p=!0;for(const t of this.#u)try{await Promise.resolve(t())}catch(e){}return this.#p=!1,!0}remove(e){if(!this.#p&&"function"==typeof e){const t=this.#u.indexOf(e);if(-1!==t)return this.#u.splice(t,1),!0}return!1}removeAt(e){return!this.#p&&"number"==typeof e&&e>=0&&e<this.#u.length&&(this.#u.splice(e,1),!0)}clear(){return this.#u=[],!0}}class Orientation{static#e=null;#d=null;change=null;constructor(){if(Orientation.#e)return Orientation.#e;this.change=new OrientationChange,this.#d=top.matchMedia("(orientation: landscape)"),this.#d.onchange=()=>{this.change.execute()};const e=()=>{this.#d.matches?document.documentElement.classList.remove("portrait"):document.documentElement.classList.add("portrait")},t=screen.orientation;(document.documentElement.classList.contains("dync")||t.type.startsWith("p")&&(90==t.angle||270==t.angle)||t.type.startsWith("l")&&(0==t.angle||180==t.angle))&&this.change.add(e),e(),Object.freeze(this),Orientation.#e=this}get landscape(){return this.#d.matches}get portrait(){return!this.#d.matches}get matches(){return this.#d.matches?"landscape":"portrait"}destroy(){this.#d.onchange=null,this.change.clear(),Orientation.#e=null}}class ViewportObserver{static#e=null;#f=new Set;constructor(){if(ViewportObserver.#e)return ViewportObserver.#e;Object.freeze(this),ViewportObserver.#e=this}removed(e,t,n={childList:!0,subtree:!0}){if("string"==typeof e&&(e=document.querySelector(e)),!(e instanceof HTMLElement))throw new TypeError("Invalid target element or selector.");const r=new MutationObserver(e=>{e.forEach(e=>{if(e.removedNodes.length>0)for(let n=0;n<e.removedNodes.length;n++){const r=e.removedNodes[n];r.nodeType===Node.ELEMENT_NODE&&t(r)}})});return r.observe(e,n),this.#f.add(r),()=>{r.disconnect(),this.#f.delete(r)}}added(e,t,n={childList:!0,subtree:!0}){if("string"==typeof e&&(e=document.querySelector(e)),!(e instanceof HTMLElement))throw new TypeError("Invalid target element or selector.");if("function"!=typeof t)throw new TypeError("Callback function is required.");const r=new MutationObserver(e=>{e.forEach(e=>{if(e.addedNodes.length>0)for(let n=0;n<e.addedNodes.length;n++){const r=e.addedNodes[n];r.nodeType===Node.ELEMENT_NODE&&t(r)}})});return r.observe(e,n),this.#f.add(r),()=>{r.disconnect(),this.#f.delete(r)}}attributes(e,t,n=[]){if("string"==typeof e&&(e=document.querySelector(e)),!(e instanceof HTMLElement))throw new TypeError("Invalid target element or selector.");if("function"!=typeof t)throw new TypeError("Callback function is required.");const r=Array.isArray(n)?n:[n],s=new MutationObserver(n=>{n.forEach(n=>{if("attributes"===n.type&&n.target.nodeType===Node.ELEMENT_NODE){const s=n.attributeName;(0===r.length||r.includes(s))&&t(e,s,n.oldValue,e.getAttribute(s))}})});return s.observe(e,{attributes:!0,attributeOldValue:!0,subtree:!1,childList:!1,characterData:!1}),this.#f.add(s),()=>{s.disconnect(),this.#f.delete(s)}}visible(e,t,n={},r=!0){if(!(e instanceof HTMLElement)&&"string"!=typeof e)throw new TypeError("Target must be an HTMLElement or selector string");if("function"!=typeof t)throw new TypeError("Callback function is required");const s=new IntersectionObserver(e=>{for(const n of e)n.isIntersecting&&n.target.nodeType===Node.ELEMENT_NODE&&(t(n.target),r&&s.unobserve(n.target))},n);return e instanceof HTMLElement?s.observe(e):"string"==typeof e&&document.querySelectorAll(e).forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&s.observe(e)}),this.#f.add(s),()=>{s.disconnect(),this.#f.delete(s)}}disconnect(){for(const e of this.#f)e.disconnect();this.#f.clear()}}class ViewportService{static#e=null;orientation=null;observe=null;constructor(){if(ViewportService.#e)return ViewportService.#e;this.orientation=new Orientation,this.observe=new ViewportObserver,Object.freeze(this),ViewportService.#e=this}get landscape(){return this.orientation.landscape}get portrait(){return this.orientation.portrait}destroy(){ViewportService.#e=null}}class RouterService{static#e=null;#g=null;#m=null;constructor(){if(RouterService.#e)return RouterService.#e;top.history.replaceState(!0,null,location.origin+location.pathname);const e=Object.create(null);e.top=e=>{e.preventDefault(),top.location.replace(e.currentTarget.dataset.href)},e.parent=e=>{e.preventDefault(),parent.location.replace(e.currentTarget.dataset.href)},e.blank=e=>{e.preventDefault(),self.open(e.currentTarget.dataset.href,"_blank")},e.assign=e=>{e.preventDefault(),location.assign(e.currentTarget.dataset.href)},e.replace=e=>{e.preventDefault(),location.replace(e.currentTarget.dataset.href)},this.#g=e,document.documentElement.classList.contains("webcore")&&top.addEventListener("DOMContentLoaded",()=>{this.init(),this.anchor(document.body)},{once:!0}),Object.freeze(this),RouterService.#e=this}init(){this.#g.frames=Object.create(null);const e=top.frames.length;for(let t=0;t<e;t++){const e=Object.create(null);e.frame=top.frames[t],e.assign=t=>{t.preventDefault(),e.frame.location.assign(t.currentTarget.dataset.href)},e.replace=t=>{t.preventDefault(),e.frame.location.replace(t.currentTarget.dataset.href)};const n=top.frames[t].name||"view";this.#g.frames[n]=e}}anchor(e){return e instanceof HTMLElement&&(0==e.childElementCount&&(e=e.parentElement),e.querySelectorAll("a[data-href]").forEach(e=>{const t=!!e.hasAttribute("data-target")&&e.dataset.target.trim(),n=!!e.hasAttribute("data-iframe")&&e.dataset.iframe.trim();if(t){if("top"===t)return e.onclick=this.#g.top,!0;if("parent"===t)return e.onclick=this.#g.parent,!0;if("blank"===t)return e.onclick=this.#g.blank,!0}return n&&Object.hasOwn(this.#g.frames,n)?t&&"self"===t?(e.onclick=this.#g.frames[n].replace,!0):(e.onclick=this.#g.frames[n].assign,!0):t&&"self"===t?(e.onclick=this.#g.replace,!0):(e.onclick=this.#g.assign,!0)}),!0)}}class Component{name=null;component=null;props=null;constructor(e,t){this.name=e,this.props=t.observedAttributes||null,this.component=t}createInstance(){return new this.component}getComponentClass(){return this.component}}class ComponentTemplate{#y=!0;#b=null;#v="<div><slot></slot></div>";get initial(){return this.#y}get html(){return this.#v}set html(e){this.#y&&"string"==typeof e&&e.length>3&&(this.#v=ComponentTemplate.compress(e),this.#y=!1)}has(){return"string"==typeof this.#v&&this.#v.length>3}fragment(e=!1){return null==this.#b&&(this.#b=document.createRange().createContextualFragment(this.#v)),!0===e?this.#b.firstElementChild.cloneNode(!0):this.#b.firstElementChild}static compress(e){return e.replace(/\n\s*/g,"").replace(/>\s+</g,"><").trim()}}class ComponentStyles{#w=null;#O=null;#y=!0;#E=!1;#T=null;get initial(){return this.#y}get href(){return this.#w}get style(){return this.#O}set style(e){this.#y&&(e.endsWith(".css")?(this.#w=e,this.#y=!1):e.length>3&&(this.#O=ComponentStyles.compress(e),this.#y=!1))}async getStyleSheet(){if(null!==this.#w&&!this.#E)try{const e=await n.loader(this.#w);this.#O=ComponentStyles.compress(e),this.#E=!0}catch(e){throw new TypeError("Component style loading failed. ",e)}if(!this.#y&&null==this.#T){const e=new CSSStyleSheet;e.replaceSync(this.#O),this.#T=[e]}return this.#T}static compress(e){return e.replace(/\n\s*/g,"").replace(/\s*{\s*/g,"{").replace(/\s*}\s*/g,"}").replace(/\s*:\s*/g,":").replace(/\s*;\s*/g,";").replace(/;\s*}/g,"}").trim()}}class ComponentBuilder extends HTMLElement{#j="core-element";#S="open";#C=[];#t=Object.create(null);#x=Object.create(null);#L=Object.create(null);#k=null;#M=null;#A=null;#P=null;static check(e){return"string"!=typeof e?null:(e&&!e.includes("-")&&(e=`core-${e}`),e)}constructor(e=null){super(),this.#P=Object.getPrototypeOf(this).constructor,this.#j=this.#P.tag,Object.isObject(e)&&(this.#A=n.configuration.create(e)),Object.hasOwn(this.#P,"template")||(this.#P.template=new ComponentTemplate),Object.hasOwn(this.#P,"styles")||(this.#P.styles=new ComponentStyles),Object.freeze(this.#P),this.create(),this.#r(),this.#H()}get root(){return this.#k}get shadow(){return this.#M}get services(){return this.#t}get element(){return this.#L}get config(){return this.#A}get state(){return this.#x}get props(){return Object.getPrototypeOf(this).constructor.observedAttributes||null}get tag(){return Object.getPrototypeOf(this).constructor.tag}template(e){return this.#P.template.html=e,this}styles(e){return this.#P.styles.style=e,this}mode(e="open"){if(!["open","closed"].includes(e))throw new TypeError('Shadow DOM mode must be either "open" or "closed"');return this.#S=e,this}inject(e){if(!Array.isArray(e))throw new TypeError("Component service inject must be a array value");return this.#C=e,this}connectedCallback(){if("function"==typeof this.onConnected)return this.onConnected()}attributeChangedCallback(e,t,n){if("function"==typeof this.onAttributeChanged)return this.onAttributeChanged(e,t,n)}adoptedCallback(){if("function"==typeof this.onAdopted)return this.onAdopted()}disconnectedCallback(){if("function"==typeof this.onDisconnected)return this.onDisconnected()}selector(e){return this.#k.querySelector(e)}service(e){return Object.hasOwn(this.#t,e)?this.#t[e]:null}create(e){if("function"!=typeof e)throw new TypeError('"create" method must be implemented by subclass');return this}render(e){if("function"!=typeof e)throw new TypeError('"render" method must be implemented by subclass');return this}#r(){if(this.#M=this.attachShadow({mode:this.#S}),this.#P.template.has()&&(this.#k=this.#P.template.fragment(!0)),this.#C.length>0){this.#t=Object.create(null);for(const e of this.#C)this.#t[e]=n.services.get(e)}}async#H(){if(!this.#P.styles.initial){const e=await this.#P.styles.getStyleSheet();this.#M.adoptedStyleSheets=e}this.#M.appendChild(this.#k)}}class ComponentService{static#e=null;#R=new Map;constructor(){if(ComponentService.#e)return ComponentService.#e;Object.freeze(this),ComponentService.#e=this}builder(){return ComponentBuilder}async load(e){if("string"!=typeof e)return null;const t=new URL(e,Object.hasOwn(self,"app")&&self.app.configuration.has("base")?self.app.configuration.get("base"):location.origin);try{const e=(await import(t.href)).default;return this.register(e),new e}catch(n){return null}}has(e){return null!==(e=ComponentBuilder.check(e))&&this.#R.has(e)}get(e){return null===(e=ComponentBuilder.check(e))?null:this.has(e)?this.#R.get(e).createInstance():null}getClass(e){return null===(e=ComponentBuilder.check(e))?null:this.has(e)?this.#R.get(e).getComponentClass():null}register(e,t=null){if(!t&&!e.tag)return this;let n=t||ComponentBuilder.check(e.tag);if(this.has(n))return this;try{customElements.define(n,e);const t=new Component(n,e);return this.#R.set(n,t),this}catch(r){return this}}registerAll(e){return"object"!=typeof e||null===e||Object.entries(e).forEach(([e,t])=>{this.register(t,e)}),this}unregister(e){return!!this.has(e)&&(this.#R.delete(e),!0)}clear(){this.#R.size;return this.#R.clear(),this}}class ViewService{static#e=null;#R=new Map;constructor(){if(ViewService.#e)return ViewService.#e;Object.freeze(this),ViewService.#e=this}register(e,t={}){return!("string"!=typeof e||!(e=e.trim())||"object"!=typeof t)&&(null!==Object.getPrototypeOf(t)&&(t=Object.assign(Object.create(null),t)),this.remove(e),this.#R.set(e,t),!0)}has(e){return"string"==typeof e&&((e=e.trim())&&this.#R.has(e))}get(e,t=null){if("string"!=typeof e)throw new TypeError("The name name must be of string type.");if((e=e.trim())&&this.has(e)){const n=this.#R.get(e);if("object"==typeof n){if("string"!=typeof t)return n;if((t=t.trim())&&Object.hasOwn(n,t))return n[t]}}return null}remove(e){return!("string"!=typeof e||!(e=e.trim())||!this.has(e))&&(this.#R.delete(e),!0)}clear(){return this.#R.clear(),!0}}class EventBuilder{service=null;element=null;handlers=Object.create(null);options=Object.create(null);empty=Object.create(null);constructor(e,t){if(!(t instanceof HTMLElement))throw new TypeError("Event target must be an HTMLElement");this.service=e,this.element=t}on(e,t,n=null){if("string"!=typeof e)throw new TypeError("Event name must be a string");if("function"!=typeof t)throw new TypeErrorv("Event handler must be a function");return this.handlers[e]=t,this.options[e]=n||this.empty,this}has(e){return"string"==typeof e&&Object.hasOwn(this.handlers,e)}get(e){return this.has(e)?this.handlers[e]:null}remove(e){return this.has(e)&&(this.handlers[e]=null,Reflect.deleteProperty(this.handlers,e),Object.hasOwn(this.options,e)&&(this.options[e]=null,Reflect.deleteProperty(this.options,e))),this}bind(){if(!this.service)throw new TypeError("EventService instance is missing");return this.service.register(this),this}once(e,t,n=null){return n||(n=this.empty),n.once=!0,this.on(e,t,n)}click(e,t){return this.on("click",e,t)}submit(e,t){return this.on("submit",e,t)}reset(e,t){return this.on("reset",e,t)}invalid(e,t){return this.on("invalid",e,t)}resize(e,t){return this.on("resize",e,t)}scroll(e,t){return this.on("scroll",e,t)}focus(e,t){return this.on("focus",e,t)}blur(e,t){return this.on("blur",e,t)}change(e,t){return this.on("change",e,t)}input(e,t){return this.on("input",e,t)}keydown(e,t){return this.on("keydown",e,t)}toggle(e,t){return this.on("toggle",e,t)}show(e,t){return this.on("show",e,t)}open(e,t){return this.on("open",e,t)}close(e,t){return this.on("close",e,t)}error(e,t){return this.on("error",e,t)}message(e,t){return this.on("message",e,t)}dblclick(e,t){return this.on("dblclick",e,t)}contextmenu(e,t){return this.on("contextmenu",e,t)}hover(e,t,n){return this.on("mouseenter",e,n),this.on("mouseleave",t,n),this}}class EventService{static#e=null;#g=new WeakMap;constructor(){if(EventService.#e)return EventService.#e;Object.freeze(this),EventService.#e=this}#z=e=>this.#D(e);target(e,t,n=10){if(!(e instanceof Event))return null;if(!e.target||!e.currentTarget)return null;let r=e.target;const s=e.currentTarget;if("string"!=typeof t)return r;if(!(t=t.trim().toUpperCase()))return r;if(r===s)return s.nodeName===t?r:null;if("string"==typeof t){let e=0;for(;e<n&&r!=s;){if(r.nodeName===t)return r;if(!r.parentElement)return null;r=r.parentElement,e++}}return null}has(e,t=null){if(!(e instanceof HTMLElement))return!1;return!!this.#g.has(e)&&("string"!=typeof t||Object.hasOwn(this.#g.get(e),t))}on(e,t,n,r){if(!(e instanceof HTMLElement))throw new TypeError("Event target must be an HTMLElement");if("string"!=typeof t)throw new TypeError("Event name must be a string");if("function"!=typeof n)throw new TypeError("Event handler must be a function");let s=null;try{return this.#g.has(e)?(s=this.#g.get(e),Object.hasOwn(s,t)||e.addEventListener(t,this.#z,r)):(s=Object.create(null),this.#g.set(e,s),e.addEventListener(t,this.#z,r)),s[t]=n,this}catch(i){return this}}select(e){return new EventBuilder(this,e)}register(e){try{if(e instanceof EventBuilder){this.#g.set(e.element,e.handlers);for(const t of Object.keys(e.handlers))e.element.addEventListener(t,this.#z,e.options[t])}}catch(t){return!1}}once(e,t,n,r={}){try{return r.once=!0,e.addEventListener(t,n,r),!0}catch(s){return!1}}#D(e){const t=e.type;let n=null;if(this.has(e.currentTarget,t)?n=this.#g.get(e.currentTarget)[t]:this.has(e.target,t)&&(n=this.#g.get(e.target)[t]),"function"==typeof n)try{return n(e)}catch(r){return!1}return!1}emit(e,t){if(this.has(e,t)){const r=this.#g.get(e)[t];try{return r()}catch(n){return!1}}return!1}remove(e,t=null){if(this.has(e)){let n=this.#g.get(e);if("string"==typeof t){if(!Object.hasOwn(n,t))return this;n[t]=null,Reflect.deleteProperty(n,t),e.removeEventListener(t,this.#z),0===Object.keys(n).length&&this.#g.delete(e)}else{for(const t of Object.keys(n))n[t]=null,e.removeEventListener(t,this.#z);n=null,this.#g.delete(e)}}return this}debounce(e,t=300,n=!1){let r=null;return function(...s){const i=this;r&&clearTimeout(r),n&&!r&&e.apply(i,s),r=setTimeout(()=>{r=null,n||e.apply(i,s)},t)}}throttle(e,t=300,n=!0){let r=null,s=0;return function(...i){const o=this,a=Date.now(),c=t-(a-s);r&&(clearTimeout(r),r=null),c<=0?(e.apply(o,i),s=a):n&&!r&&(r=setTimeout(()=>{e.apply(o,i),s=Date.now(),r=null},c))}}destroy(){this.#g=new WeakMap}}class ReactiveElement{#L=null;#B="";constructor(e,t){e instanceof HTMLElement?this.#L=e:this.#L=document.createElement("div"),t&&"string"==typeof t&&(this.#L.textContent=t,this.#B=t),Object.freeze(this)}get element(){return this.#L}get value(){return this.#B}set value(e){"function"==typeof this.onchange&&this.#B!==e&&this.onchange(e,this.#B,this.#L),this.#B=e,this.#L.textContent=e}mount(e){if("string"==typeof e){const t=document.querySelector(e);t&&t.append(this.#L)}else e instanceof HTMLElement&&e.append(this.#L);return this}unmount(){return this.#L.remove(),this}}class ReactiveStore{#N=null;constructor(e=null){const t=Object.create(null);t.value=e,this.#N=new Proxy(t,{get:(e,t)=>e.value,set:(e,t,n)=>("function"==typeof this.onchange&&this.onchange(n,e.value),e.value=n,!0)}),Object.freeze(this)}get value(){return this.#N.value}set value(e){this.#N.value=e}}class ReactiveService{static#e=null;constructor(){if(ReactiveService.#e)return ReactiveService.#e;Object.freeze(this),ReactiveService.#e=this}element(e="div",t){if(e instanceof HTMLElement)return new ReactiveElement(e,t);try{"string"!=typeof e&&(e="div");const n=document.createElement(e);return new ReactiveElement(n,t)}catch{return new ReactiveElement(document.createElement("div"),t)}}store(e){return new ReactiveStore(e)}}class HttpClient{url=null;baseURL=null;parse="text";headers=Object.create(null);payload=Object.create(null);expand=Object.create(null);encoding="utf-8";abort=!1;abortController=null;timeout=0;timeoutId=null;ontimeout=e=>{};onabort=e=>{};constructor(e=null){if(!HttpClient.isKeyValuePair(e))throw new TypeError("Invalid configuration.");if(!Object.hasOwn(e,"url"))throw new TypeError("URL is required.");for(const[t,n]of Object.entries(HttpClient.config))if(Object.hasOwn(e,t)){if(typeof e[t]!==n.type)throw new TypeError(`The ${t} must be of ${n.type} type.`);if(Object.hasOwn(n,"valid")&&!n.valid.includes(e[t]))throw new TypeError(`The ${t} parameter is invalid.`);this[t]=e[t]}for(const t of["headers","payload"])if(Object.hasOwn(e,t)){if(!HttpClient.isKeyValuePair(e[t]))throw new TypeError(`The ${t} must be of object type.`);for(const n of Object.keys(e[t]))this[t][n]=e[t][n]}for(const[t,n]of Object.entries(HttpClient.expand))if(Object.hasOwn(e,t)){if(typeof e[t]!==n.type)throw new TypeError(`The ${t} must be of ${n.type} type.`);if(!n.valid.includes(e[t]))throw new TypeError(`The ${t} parameter is invalid.`);this.expand[t]=e[t]}for(const t of["Content-Type","Accept"])if(Object.hasOwn(this.headers,t))for(const e of HttpClient.format)if(this.headers[t].includes(e)){this.headers[t]=`${this.headers[t]}; charset=${this.encoding}`;break}}get authorization(){return this.headers&&Object.hasOwn(this.headers,"Authorization")?this.headers.Authorization:""}set authorization(e){"string"==typeof e&&(this.headers.Authorization=e)}get contentType(){return this.headers&&Object.hasOwn(this.headers,"Content-Type")?this.headers["Content-Type"]:""}set contentType(e){if("string"==typeof e)for(const t of HttpClient.format)if(e.includes(t)){this.headers["Content-Type"]=`${e}; charset=${this.encoding}`;break}}getURL(e=null){try{const t=this.baseURL?new URL(this.url,this.baseURL):new URL(this.url,Object.hasOwn(self,"app")&&self.app.configuration.has("base")?self.app.configuration.get("base"):location.origin);if(e=e||this.payload,HttpClient.isKeyValuePair(e))for(const n of Object.keys(e))t.searchParams.set(n,e[n]);return t}catch(t){throw t}}cancel(){return!!this.abortController&&(this.abortController.abort(),!0)}async send(e=null,t="GET",n=null,r=0,s=!1){e=e||this.getURL();const i=Object.create(null);if("string"!=typeof t)throw new TypeError("The method parameter is invalid.");if(i.method=t.trim().toUpperCase(),!HttpClient.method.includes(i.method))throw new TypeError("The method parameter is invalid.");Object.keys(this.headers).length>0&&(i.headers=new Headers(this.headers)),Object.assign(i,this.expand),n&&"object"==typeof n&&(HttpClient.isKeyValuePair(n)?(n=JSON.stringify(n),Object.hasOwn(i,"headers")&&i.headers.set("Content-Type",`application/json; charset=${this.encoding}`)):Object.hasOwn(i,"headers")&&i.headers.delete("Content-Type")),n&&(i.body=n),this.abortController=new AbortController,i.signal=this.abortController.signal,"function"==typeof this.onrequest&&this.onrequest(i),(r=Number(r)||Number(this.timeout)||0)>0&&(this.timeoutId=setTimeout(()=>{this.abortController.abort(),"function"==typeof this.ontimeout&&this.ontimeout()},r));try{const t=await fetch(e,i);if(this.timeoutId&&clearTimeout(this.timeoutId),!t.ok){if("function"==typeof this.validateStatus)return this.validateStatus(t);throw new Error(`HTTP ${t.status}: ${t.statusText}`)}const n=await HttpClient.parse(this.parse,t);return"function"==typeof this.onresponse?this.onresponse(n):n}catch(o){if(this.timeoutId&&clearTimeout(this.timeoutId),"AbortError"===o.name&&"function"==typeof this.onabort)return this.onabort();throw o}finally{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.abortController=null}}async get(e=null,t=0,n=!1){try{const r=this.getURL(e);return await this.send(r,"GET",null,t,n)}catch(r){throw r}}async post(e,t=0,n=!1){return await this.send(null,"POST",e,t,n)}async put(e,t=0,n=!1){return await this.send(null,"PUT",e,t,n)}async delete(e,t=0,n=!1){return await this.send(null,"DELETE",e,t,n)}}class HttpService{static#e=null;#I=new Map;constructor(){if(HttpService.#e)return HttpService.#e;HttpClient.method=["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS"],HttpClient.config={url:{type:"string"},baseURL:{type:"string"},parse:{type:"string",valid:["text","json","blob","formData","arrayBuffer"]},encoding:{type:"string"},onrequest:{type:"function"},onresponse:{type:"function"},timeout:{type:"number"},ontimeout:{type:"function"},abort:{type:"boolean"},onabort:{type:"function"},validateStatus:{type:"function"}},HttpClient.expand={mode:{type:"string",valid:["cors","same-origin","no-cors"]},credentials:{type:"string",valid:["omit","same-origin","include"]},cache:{type:"string",valid:["default","no-cache","no-store","reload","force-cache"]},redirect:{type:"string",valid:["follow","error","manual"]}},HttpClient.format=["text","json","css","script","htm","xml"],HttpClient.isKeyValuePair=function(e){return["[object Object]","[object Map]"].includes(Object.prototype.toString.call(e))},HttpClient.parse=async function(e,t){switch(e){case"json":return await t.json();case"text":default:return await t.text();case"blob":return await t.blob();case"formData":return await t.formData();case"arrayBuffer":return await t.arrayBuffer()}},Object.freeze(HttpClient),Object.freeze(this),HttpService.#e=this}create(e=null){return new HttpClient(e)}has(e){return!("string"!=typeof e||!e)&&this.#I.has(e)}get(e){return this.has(e)?this.#I.get(e):null}set(e,t){return"string"==typeof e&&e&&this.#I.set(e,t),this}delete(e){if(this.has(e))return this.#I.delete(e),this}clear(){return this.#I.clear(),!0}}class Encoding{static#e=null;#V=new TextEncoder;#U=new TextDecoder("utf-8");constructor(){if(Encoding.#e)return Encoding.#e;Object.freeze(this),Encoding.#e=this}arrayBufferToBase64(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return window.btoa(n)}base64ToArrayBuffer(e){const t=window.atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}stringToBase64(e){if(null==e||null==e)throw new TypeError("Parameter cannot be null or empty.");if("string"!=typeof e)throw new TypeError("The parameter must be of string type.");try{const t=this.#V.encode(e);return this.arrayBufferToBase64(t)}catch{throw new TypeError("Base64 encoding error.")}}base64ToString(e){if(null==e||null==e)throw new TypeError("Parameter cannot be null or empty.");if("string"!=typeof e)throw new TypeError("The parameter must be of string type.");try{return this.#U.decode(this.base64ToArrayBuffer(e))}catch{throw new TypeError("Base64 decoding error.")}}stringToUrlBase64(e){return this.stringToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}urlBase64ToString(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return this.base64ToString(t)}}class TextService{static#e=null;encoding=null;constructor(){if(TextService.#e)return TextService.#e;this.encoding=new Encoding,Object.freeze(this),TextService.#e=this}}class GlobalData extends DataBase{constructor(e=null){super(e)}}class GlobalService{static#e=null;#$=new GlobalData;#W=new GlobalData;#x=new GlobalData;constructor(){if(GlobalService.#e)return GlobalService.#e;Object.freeze(this),GlobalService.#e=this}get vars(){return this.#W}get system(){return this.#$}get state(){return this.#x}}class StateData extends DataBase{constructor(e=null){super(e)}}class StateService{static#e=null;#x=new StateData;constructor(){if(StateService.#e)return StateService.#e;StateService.#e=this}has(e){return this.#x.has(e)}get(e){return this.#x.get(e)}add(e,t){return this.#x.set(e,t),this}set(e,t){return this.#x.set(e,t),this}delete(e){return this.#x.delete(e),this}remove(e){return this.#x.delete(e),this}clear(){return this.#x.clear()}}const e=Application.createBuilder(),t=[{name:"initial",service:InitialService},{name:"layout",service:LayoutService},{name:"viewport",service:ViewportService},{name:"router",service:RouterService},{name:"component",service:ComponentService},{name:"view",service:ViewService},{name:"event",service:EventService},{name:"reactive",service:ReactiveService},{name:"http",service:HttpService},{name:"text",service:TextService},{name:"global",service:GlobalService},{name:"state",service:StateService}];for(const r of t)e.addSingleton(r.name,r.service);const n=e.build();n.run(),self.app=n}();